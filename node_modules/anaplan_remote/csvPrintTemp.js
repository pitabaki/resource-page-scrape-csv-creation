const fs = require('fs'),
	path = require('path'),
	csv = require('csvtojson'),
	readListTemp = require('./readListTemp');

let csvPrintTemp = ( obj ) => {
	let printJSON = "[",
		csvArr = [];
	csv().fromFile(obj.url).on( 'json' , ( jsonObj ) => {
		csvArr.push(JSON.stringify(jsonObj));
	}).on('done',(error)=>{
		printJSON += csvArr.join(',') + "]";
		const newJSONPath = obj.json + "tempURLs.json";
		fs.writeFile( newJSONPath, printJSON, ( err ) => {
			if ( err ) {
				console.log( err );
			}
			const list = require(newJSONPath);
			readListTemp( list, 0, obj.print );
		});
	    //console.log(csvArr);
	})
};

module.exports = csvPrintTemp;