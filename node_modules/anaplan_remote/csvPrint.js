const fs = require('fs'),
	path = require('path'),
	csv = require('csvtojson'),
	readList = require('./readList');

let csvPrint = ( obj ) => {
	let printJSON = "[",
		csvArr = [];
	csv().fromFile(obj.url).on( 'json' , ( jsonObj ) => {
		csvArr.push(JSON.stringify(jsonObj));
	}).on('done',(error)=>{
		printJSON += csvArr.join(',') + "]";
		const newJSONPath = obj.json + "URLs.json";
		fs.writeFile( newJSONPath, printJSON, ( err ) => {
			if ( err ) {
				console.log( err );
			}
			const list = require(newJSONPath);
			console.log(list);

			return false;
			readList( list, 0, obj.print, obj.failed );
		});
	    //console.log(csvArr);
	})
};

module.exports = csvPrint;