const captureMetaContent = require('./captureMetaContent'),
	fs = require('fs');
let csvArr = [];
let readList = ( arr, x, printPath, failedPath ) => {
	let fileName = 'file_' + x;
	let cap = arr.length;
	//cap = 30; //delete when done with testing
	let completeFile = printPath + fileName + '.csv';
	if ( x + 1 !== cap && fs.existsSync(completeFile) === false ) {
		//csvArr.push(arr[x].url);
		//console.log(arr[x].url);
		captureMetaContent( arr[x].url, printPath, x, failedPath );
		if ( x % 30 === 0 ) {
			console.log(`
				/************/


				Pause for 2 sec


				/************/
				`);
			setTimeout(() => {
				readList( arr, x + 1, printPath, failedPath );
			}, 2000);
		} else {
			setTimeout(() => {
				readList( arr, x + 1, printPath, failedPath );
			}, 2000);
		}
	} else if ( x + 1 === cap ) {
		console.log('done');
		//console.log(csvArr);
		return false;
	} else {
		console.log( completeFile + " exists");
		readList( arr, x + 1, printPath, failedPath );
	}
};

module.exports = readList;