"use strict";

const sessionsScripts = () => {
  return `<script>jQuery(document).ready(function($){
    var hashReg = /registration-hub18$/;
    if ( hashReg.test(window.location.href) === true ) {
      setTimeout(function(){
        $('#registration-modal').trigger('click');
      }, 3000);
    }
    $('.video-playlist').hover( function (){
      var selection = $(this);
      selection.addClass('active');
      console.log($(this).attr('href'));
    }, function () {
      $(this).removeClass('active');
    });
    $('.video-playlist').click(function(e){
      e.preventDefault();
      var selection = $(this).attr("href");
      var idHandle = $(selection);
      var youtube = idHandle.data("youtube");
      if ( youtube !== "" && youtube !== undefined) {
        var youtubeBuild = "https://www.youtube.com/embed/" + youtube + "?vq=hd1080&amp;modestbranding=1&amp;autoplay=0&amp;iv_load_policy=3&amp;rel=0&amp;showinfo=0&amp;theme=lightwmode=transparent&amp;enablejsapi=1&amp;version=3";
        var iframeSelection = idHandle.find("iframe");
        iframeSelection.attr('src', youtubeBuild);
      }
    });
    $('.filter-button').click( function(){
      var selection = $(this).attr('href');
      selection = selection.replace('#','');
    var regs = new RegExp(selection, "g");
      $('.filter-button').removeClass('active');
      $(this).addClass('active');
      var hubRecapSelection = $('.hub-recap');
      var selectionLength = hubRecapSelection.length;
      for (var n = 0; n < selectionLength; n++) {
        hubRecapSelection.eq(n).closest('.col-md-4').css({'display':'block'});
        if (selection === 'all') {
          hubRecapSelection.eq(n).closest('.col-md-4').css({'display':'block'});
        } else if ( regs.test(hubRecapSelection.eq(n).children('.hub17-recap').eq(0).data("filter")) === false ) {
          console.log("False");
          hubRecapSelection.eq(n).css({'display':'none'});
        } else if ( regs.test(hubRecapSelection.eq(n).children('.hub17-recap').eq(0).data("filter")) === true ) {
          console.log("True");
          hubRecapSelection.eq(n).css({'display':'block'});
        }
      }
    });

    var hash = window.location.hash.substring(1);
    if (hash) {
        $('.hub-recap').filter(function() {
            return $(this).children('.hub17-recap').data('filter') !== hash;            
        }).hide();

        $('a.filter-button[href="#'+hash+'"]').addClass('active');
        
        $("html,body").animate({
          scrollTop: $(".recap-videos").offset().top - 265
        }, 100);
    }

    function createCookie(name,value,days) {
        if (days) {
            var date = new Date();
            date.setTime(date.getTime()+(days*24*60*60*1000));
            var expires = '; expires='+date.toGMTString();
        }
        else {
           var expires = ''
           };
        document.cookie = name+'='+value+expires+'; path=/';
    }
    function readCookie(name) {
        var nameEQ = name + '=';
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    }
    if (readCookie('mae-jemison') !== 'true') {
      createCookie('mae-jemison', true, 15);
      setTimeout(function(){
        $('#mae-jemison-trigger').trigger('click');
      }, 3000); 
    }
    $('.carousel').carousel();
    $('#player').css({'opacity':'1'});
    var locCheck = window.location.href,
        urlCheck = /#why-attend$/gi;
    var vidAnchor = $('#bg-content a');
    if (urlCheck.test(locCheck) === true) {
      setTimeout(function(){
        $('#bg-content a').modal();
        $('.modal-lightbox').addClass('in');
        $('.modal-lightbox').css({'display':'block','opacity':'0','top':'-200px','transition':'all 0.25s ease-in'});
        setTimeout(function() {
          $('.modal-lightbox').css({'opacity':'1','top':'0'});
        }, 100);
        $(document).on('click', '.modal-lightbox', function () {
          $('#bg-content a').modal('hide');
          $('.modal-lightbox').removeClass('in');
          $('.modal-lightbox').css({'display':'none'});
          $('.colorbox-full').css({'display':'block'});
        });
      },1000);
    }
  });</script>`;
} 

module.exports = sessionsScripts;