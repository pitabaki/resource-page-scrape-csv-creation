const fs = require('fs'),
	customerHeroMarkup = require("./customerHeroMarkup"),
	customerHighlightsMarkup = require("./customerHighlightsMarkup"),
	customerQuotationMarkup = require("./customerQuotationMarkup"),
	customerRelatedMarkup = require("./customerRelatedMarkup"),
	customerSummaryMarkup = require("./customerSummaryMarkup"),
	customerVideosMarkup = require("./customerVideosMarkup");

var customerAssembly = function ( pathy, customerObj ) {
	let markup = customerHeroMarkup(customerObj);
	markup += customerHighlightsMarkup(customerObj);
	markup += customerSummaryMarkup(customerObj);
	markup += customerVideosMarkup(customerObj);
	markup += customerQuotationMarkup(customerObj);
	markup += customerRelatedMarkup(customerObj);
	markup += `<script type="text/javascript">
  jQuery(document).ready(function($){
    jQuery(".modal-backdrop, #modal-video-one .close, #modal-video-one .btn").live("click", function() {
      console.log("clicked");
            jQuery("#modal-video-one iframe").attr("src", jQuery("#modal-video-one iframe").attr("src"));
    });
    $(".modal").click(function(){
      setTimeout(function(){
        var modalCount = $(".modal");
        for( var n = 0; n < modalCount.length; n++ ) {
          var oldiFrame = modalCount.eq(n).find("iframe").attr("src");
          modalCount.eq(n).find("iframe").attr("src","");
          modalCount.eq(n).find("iframe").attr("src", oldiFrame);
        }
      },250);
    });
    $(".carousel").carousel({
     interval: 7000
    });
  });
</script>
<script type="text/javascript" src="/wp-content/themes/anaplan-www/js/customer-story.js?nocache=20170727430"></script>`;
	fs.writeFile( pathy, markup, (err) => {
		if (err) {
			console.log(err);
		}
		console.log( pathy + " written" );
	});
}

module.exports = customerAssembly;